# git - 总结

[TOC]

## 1. 什么是版本控制

### 我的总结

- 版本控制器所做的工作可以理解为给桌游拍照记录保存点。
- 当你使用版本控制的时候，你就**创建了<u>保存项目的安全区</u>**，**这让你可以自由地改变任何关于你的项目的信息并确保不会遗失任何东西**。
- “版本控制”也可以称为“控制版本”！它是帮助你控制（或管理）某个事物（通常是源代码）的不同版本。 
  - 控制：掌握住对象，不使其任意活动或超出范围;或使其按控制者的意愿活动 
- 版本控制系统分为两类：**集中式模型（centralized model）和分布式模型（distributed model）**
  - 在集中式模型中，有一台功能强大的中央服务器托管项目，每个互动都必须通过这台中央服务器。
  - 在分布式模型中，没有中央信息库。每个开发者的计算机里都有一份完整的项目拷贝。这非常酷，因为这意味着你可以离线工作。
- Git 和 GitHub 是完全不同的。
  - Git 是版本控制**工具**。
  - GitHub 是托管 Git 项目的**服务**。
  - 要使用 Git 项目，你未必要使用 GitHub，但 GitHub 是一个非常棒的服务，你可以基本上把它当作**可以上传你的项目副本的另一台计算机**。

### 官方总结

有很多版本控制系统可供我们选择

- [Git](https://git-scm.com/)
- [Subversion](https://subversion.apache.org/)
- [Mercurial](https://www.mercurial-scm.org/)

版本控制系统模型包括两大主要类型：

- **集中式模型** - 所有用户都连接到一个中央的主仓库（master repository）
- **分布式模型** - 每个用户都在自己的计算机上拥有完整的仓库。

#### 深入研究

- [集中式与分布式版本控制系统的比较（Atlassian 博文 - 英）](http://blogs.atlassian.com/2012/02/version-control-centralized-dvcs/)
- 分布式版本控制：[维基百科链接](https://en.wikipedia.org/wiki/Distributed_version_control) | [百度百科链接](https://baike.baidu.com/item/DVCS/19310970)

#### 小结

版本控制系统的主要目的是帮助你**保留项目的详细历史记录**，并且能够在不同的版本上进行工作。保留详细的项目历史记录很重要，因为这样**可以看出一段时间内项目的进度**。如果需要，你还可以回到项目的某个阶段，并**恢复数据或文件**。



## 2. 日常开发中的版本控制

- 在使用 word 等文档编辑软件时，其实计算机也在帮你记录版本，因为你可以使用 `ctrl` + `z` 来回到修改之前。
- 实际上，我用到的**每个应用都具有撤销功能。你可以将它看做一种版本控制形式**，但是却是很简单的形式。
- Google 文档是一个相比普通文档软件拥有更强大的版本控制功能，它拥有“版本历史记录（Revision history）”页面（Revision 和 Version 是同义词！表示：版本、修订），你可以通过这个页面去查看你到底修改了什么。但这个版本控制并非十全十美，它还缺少了一些东西，比如：
  - 标记更改的功能
  - 做出为何更改的详细描述的功能
  - 在同一文档的不同版本之间切换的功能
  - 撤消更改 A，编辑 B，然后回到更改 A 并且不影响编辑 B 的功能
- 版本控制工具 Git 可以实现以上所有功能，甚至更多。



## 3. Git 和版本控制术语

- 常用的一些术语包括：
  - 版本控制系统（version control system）
  - 源代码管理器（source code manager）
  - 提交（commit）
  - 存储库（repository）
  - 库（repo）
  - 检出（checkout）
  - 工作目录（working directory）
  - 暂存区（staging area）
  - 索引（the index）
  - 暂存索引（staging index）
  - SHA（Secure Hash Algorithm）
  - 分支（branching）
  - 合并（merging）
  - 合并冲突（merge conflicts）
  - 远程（remotes）
- **创建自己的速查表**也会对你有所帮助。**如果你记不住某个词或概念，不妨将其写下来**。

---

### 术语

#### 版本控制系统 / 源代码管理器

**版本控制系统**（简称 **VCS**）是一个**管理源代码不同版本的工具**。**源代码管理器**（简称 **SCM**）是版本控制系统的**另一个名称**。

Git 是一个 SCM（因此也是 VCS！）。Git 网站的 URL 是 <https://git-scm.com/> （注意它的域名中直接包含“SCM”！）。

#### 提交（Commit）

Git **将数据看做微型文件系统的一组快照**。每次 **commit**（在 Git 中保持项目状态），它都对文件当时的状况拍照，并存储对该快照的引用。你可以将其看做游戏中的保存点，它会保存项目的文件和关于文件的所有信息。

你**在 Git 中的所有操作都是帮助你进行 commit**，因此 **commit 是 Git 中的基本单位。**

#### 仓库（Repository / repo）

**仓库**是**一个包含项目内容以及几个文件（在 Mac OS X 上默认地处于隐藏状态）的目录**，**用来与 Git 进行通信**。仓库可以存储在本地，或作为远程副本存储在其他计算机上。**仓库是由 commit 构成的**。

#### 工作目录 / 工作区（Working Directory）

**工作目录**是你**在计算机的文件系统中看到的文件**。当你在代码编辑器中打开项目文件时，你是在工作目录中处理文件。

**与这些文件形成对比的是保持在仓库中（在 commit 中！）的文件。**

在使用 Git 时，工作目录与命令行工具的 *current working directory* （当前工作目录）不一样，后者是 shell 当前正在查看的目录。



#### 检出（Checkout）

**检出**是**指将仓库中的内容复制到工作目录下。**

**检出／新建**：仓库中的内容被复制到工作目录。文件、提交、分支等都可从仓库检出。 



#### 暂存区 / 暂存索引 / 索引（Staging Area / Staging Index / Index）

Git 目录下的一个文件，存储的是即将进入下个 commit 内容的信息。可以将**暂存区**看做准备工作台，Git 将在此区域获取下个 commit。**暂存索引中的文件是准备添加到仓库中的文件**。

#### SHA

**SHA** 是**每个 commit 的 ID 编号**。以下是 commit 的 SHA 示例：`e2adf8ae3e2e4ed40add75cc44cf9d0a869afeb6`。

它是一个长 40 个字符的字符串（由 0–9 和 a–f 组成），并**根据 Git 中的文件或目录结构的内容计算得出**。SHA 的全称是"Secure Hash Algorithm"（安全哈希算法）。如果你想了解哈希算法，请参阅我们的[计算机科学入门课程](https://www.udacity.com/course/intro-to-computer-science--cs101)。

#### 分支（Branch）

**分支**是从主开发流程中分支出来的新的开发流程。这种分支开发流程可以在不更改主流程的情况下继续延伸下去。

当创造出一个新的开发线，并从开发主线分离后，就产生了一个分支。这条开发线可在不影响主线的同时继续工作。 

回到之前关于游戏保存点的示例，你可以将分支看做在游戏中设立保存点后，尝试一个有风险的招式。如果有风险的招式不奏效，则回到保存的位置。令分支非常强大的关键之处是你可以在一个分支上设定保存点，然后切换到另一个分支并继续设定保存点。

了解这些术语后，我们将探寻使用版本控制的一般流程，从更高的层面了解如何使用 Git。

---

- 在 git 仓库中，有三个我们需要知道的主要区域。
  - 首先是**工作区（Working Directory）**
  - 其次是**暂存区（Staging Index）**
  - 最后是**仓库区（Repository）**
- git 能够分辨从未见过的文件和文件中的内容。

  - 假设我们对网站的 CSS 文件进行了一些更改，git 看到这个更改后会将该文件标记为已修改。
  - 一旦 commit，git 又会以这次 commit 的文件状态与目前的状态进行比较，来确认是否有修改的文件与文件内容。
- git 通过将文件添加到仓库来跟踪文件，但我们不能将这些文件**直接移动**到仓库区中，它们必须首先被移动到**暂存区**，因此，我们使用 git 将更改移动到暂存区。请记住，暂存区可以**用于存放**所有**即将**提交的文件。
- 针对每个提交，git 都会为其创建一个 ID，**每个提交的 ID 即其 SHA**。
- **git 的核心是将文件更改记录为提交**，这些提交都保存在仓库区中。其他一切，像工作区目录和 SHA，都是用于生成和引用提交的。



## 5. 在 Windows 上配置命令提示符

- 如果希望能随时跳转到这个目录，我们可以将其固定到“快速访问”菜单中。要做到这一点，请右键点击“快速访问”然后选择“将当前文件夹固定到快速访问”。
- 如果想要改变窗口中的样式，比如你可能比较喜欢白色背景和黑色文本，那么可以这样操作：
  - 点击应用程序左上角，选择 Options，将前景色更新为黑色，背景色更新为白色。

### 初次配置 Git

在开始使用 Git 之前，你需要配置 Git。在命令行工具中运行以下每行，确保所有选项都已被配置好。

```
# 设置你的 Git 用户名
git config --global user.name "<Your-Full-Name>"

# 设置你的 Git 邮箱
git config --global user.email "<your-email-address>"

# 确保 Git 输出内容带有颜色标记
git config --global color.ui auto

# 对比显示原始状态
git config --global merge.conflictstyle diff3

git config --list
```

#### Git 与代码编辑器

最后一个配置步骤是让 Git 能与你的代码编辑器结合使用。以下是三个最热门的代码编辑器。如果你使用的是其他编辑器，则在 Google 中搜索“修改 Git 默认编辑器为 X 编辑器”（将 X 替换为你的代码编辑器的名称）。

#### Atom Editor 设置

```
git config --global core.editor "atom --wait"
```

#### Sublime Text 设置

```
git config --global core.editor "C:/Program Files/Sublime Text 2/sublime_text.exe' -n -w"
```

#### VSCode 设置

```
git config --global core.editor "code --wait"
```

